{% extends '::base.html.twig' %}

{% block stylesheets %}
    <link href="{{ asset('build/admin.css') }}" rel="stylesheet">
{% endblock %}

{% block javascripts %}
    <script src="{{ asset('build/admin.js') }}" defer></script>
{% endblock %}

{% block body %}
    <svg-icons src="{{ asset('build/images/icons-admin.svg') }}"></svg-icons>

    {{ parent() }}
{% endblock body %}

{% block header %}
    <nav class="sidebar_nav-wrap">
        <a href="{{ path('admin_dashboard') }}" class="sidebar_nav-logo">
            <img src="/images/logo.svg" width="80" height="22" alt="{{ 'app.parameter.name'|trans }}">
        </a>
        <ul class="sidebar_nav-nav">
            {% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
                <li>
                    <a href="{{ path('admin_dashboard') }}" class="sidebar_nav-link sidebar_nav-nav_item">
                        <svg><use xlink:href="#gear"></use></svg>
                        {{ 'app.admin.menu.admin'|trans }}
                    </a>

                    {%
                        set items = {
                            'Users': path('xm_user_admin_user_list') ~ '?' ~ user_filter.query(),
                            'Login History': path('xm_user_admin_login_history'),
                        }
                    %}
                    <menu-subnav name="{{ 'app.admin.menu.admin'|trans }}"
                        :items="{{ items|json_encode }}">
                    </menu-subnav>
                </li>
            {% endif %}
        </ul>

        <div class="sidebar_nav-bottom_wrap">
            {% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
                <div class="sidebar_nav-profile">
                    <a href="{{ path('fos_user_profile_edit') }}">
                        {% if app.user.name %}
                            <div>{{ app.user.name }}</div>
                        {% else %}
                            <div>Profile</div>
                        {% endif %}
                    </a>
                </div>
                <div class="sidebar_nav-logout">
                    <a href="{{ path('fos_user_security_logout') }}">Logout</a>
                </div>
            {% endif %}
            <div class="sidebar_nav-copyright">
                <a href="{{ path('index') }}" target="_blank">Â©{{ 'now'|date('Y') }} {{ 'app.parameter.name'|trans }}</a>
            </div>
        </div>
    </nav>
{% endblock %}

{% block content_wrap %}
    <header class="header_admin-wrap-small">
        <menu-small></menu-small>
        <a href="{{ path('admin_dashboard') }}">
            <img src="/images/logo.svg" width="80" height="22" alt="{{ 'app.parameter.name'|trans }}">
        </a>
    </header>
    <div class="content-wrap js-content-wrap">
        <header class="header_admin-wrap">
            <div class="header_admin-page_title">{% block header_page_title %}{% endblock header_page_title %}</div>
            <div class="header_admin-actions">{% block header_actions %}{% endblock header_actions %}</div>
        </header>

        {% block content_wrap_inside %}
            <div class="content-wrap_inside">
                {% block content %}
                    {% include 'flash_messages.html.twig' %}
                {% endblock content %}
            </div>
        {% endblock content_wrap_inside %}
    </div>
{% endblock content_wrap %}

{# no footer atm #}
{% block footer %}{% endblock %}
