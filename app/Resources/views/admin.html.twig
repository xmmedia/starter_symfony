{% extends '::base.html.twig' %}

{% block stylesheets %}
    <link href="{{ asset('css/admin.css', 'css') }}" rel="stylesheet">
{% endblock %}

{% block javascripts %}
    {# not using async because we need this to load before the other scripts #}
    <script src="{{ asset('js/admin.min.js', 'js') }}"></script>
{% endblock %}

{% block body %}
    <svg-icons src="/images/icons-admin.svg"></svg-icons>
    {{ parent() }}
{% endblock body %}

{% block header %}
    <nav class="sidebar_nav-wrap">
        <a href="{{ path('index') }}" class="sidebar_nav-logo"><img src="/images/logo.svg" alt="{{ 'app.parameter.name'|trans }}"></a>
        <ul class="sidebar_nav-nav">
            {% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
                <li>
                    <a href="{{ path('admin_dashboard') }}" class="sidebar_nav-link sidebar_nav-nav_item">
                        <svg><use xlink:href="#gear"></use></svg>
                        {{ 'app.admin.menu.admin'|trans }}
                    </a>

                    {%
                        set items = {
                            'Users' : path('admin_user_list') ~ '?' ~ user_filter.query()
                        }
                    %}
                    <menu-subnav name="{{ 'app.admin.menu.admin'|trans }}"
                         :items="{{ items|json_encode }}">
                    </menu-subnav>
                </li>
            {% endif %}
        </ul>

        <div class="sidebar_nav-bottom_wrap">
            {% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
                <div class="sidebar_nav-profile">
                    <a href="{{ path('fos_user_profile_edit') }}">
                        {% if app.user.name %}
                            <div>{{ app.user.name }}</div>
                        {% else %}
                            <div>Profile</div>
                        {% endif %}
                    </a>
                </div>
                <div class="sidebar_nav-logout">
                    <a href="{{ path('fos_user_security_logout') }}">Logout</a>
                </div>
            {% endif %}
            <div class="sidebar_nav-copyright">
                <a href="{{ path('index') }}" target="_blank">Â©{{ 'now'|date('Y') }} {{ 'app.parameter.name'|trans }}</a>
            </div>
        </div>
    </nav>
{% endblock %}

{% block content_wrap %}
    <header class="header_admin_small-wrap">
        <menu-small></menu-small>
    </header>
    <div class="content-wrap js-content-wrap">
        <header class="header_admin-wrap">
            <div class="header_admin-page_title">{% block header_page_title %}Admin{% endblock header_page_title %}</div>
            <div class="header_admin-actions">{% block header_actions %}{% endblock header_actions %}</div>
        </header>

        <div class="content-wrap_inside">
            {% block content %}
                {% include 'flashMessages.html.twig' %}
            {% endblock %}
        </div>
    </div>
{% endblock content_wrap %}

{# no footer atm #}
{% block footer %}{% endblock %}